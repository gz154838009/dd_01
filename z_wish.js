 /*
活动入口：京东众筹-众筹许愿池
短期活动
已支持IOS京东双账号,云端N个京东账号
脚本兼容: QuantumultX, Surge, Loon, JSBox, Node.js
注：会自动关注任务中的店铺跟商品，介意者勿使用。
=====================================Quantumult X=================================
[task_local]
10 10 13-20 3 * https://raw.githubusercontent.com/i-chenzhe/qx/main/z_wish.js, tag=众筹许愿池, enabled=true
=====================================Loon================================
[Script]
cron "10 10 13-20 3 *" script-path=https://raw.githubusercontent.com/i-chenzhe/qx/main/z_wish.js,tag=众筹许愿池
======================================Surge==========================
众筹许愿池 = type=cron,cronexp="10 10 13-20 3 *",wake-system=1,timeout=3600,script-path=https://raw.githubusercontent.com/i-chenzhe/qx/main/z_wish.js
====================================小火箭=============================
众筹许愿池 = type=cron,script-path=https://raw.githubusercontent.com/i-chenzhe/qx/main/z_wish.js, cronexpr="10 10 13-20 3 *", timeout=3600, enable=true
*/
const $ = new Env('众筹许愿池');
const notify = $.isNode() ? require('./sendNotify') : '';
const jdCookieNode = $.isNode() ? require('./jdCookie.js') : '';
const JD_API_HOST = 'https://api.m.jd.com/client.action/';
//Node.js用户请在jdCookie.js处填写京东ck;
//IOS等用户直接用NobyDa的jd cookie
let cookiesArr = [], cookie = '', message = '', assistList = [];
if ($.isNode()) {
    Object.keys(jdCookieNode).forEach((item) => {
        cookiesArr.push(jdCookieNode[item])
    })
    if (process.env.JD_DEBUG && process.env.JD_DEBUG === 'false') console.log = () => {
    };
} else {
    let cookiesData = $.getdata('CookiesJD') || "[]";
    cookiesData = JSON.parse(cookiesData);
    cookiesArr = cookiesData.map(item => item.cookie);
    cookiesArr.reverse();
    cookiesArr.push(...[$.getdata('CookieJD2'), $.getdata('CookieJD')]);
    cookiesArr.reverse();
    cookiesArr = cookiesArr.filter(item => item !== "" && item !== null && item !== undefined);
}
 var _0xodw='jsjiami.com.v6',_0x33c6=[_0xodw,'wovDtcOgCEDDr27DnwBzPMKYw5bDscOjwqgdYkDDuiDDu8O1JsO6w7nCmX7DrkTCmn13w6lefcKkQcKzw7bDuMOmw5dPwq7DoUsWwozDvcOxw4YrNmAiY3rCmyHClcK9woA9asOHIn4oVHrCojp5YjDCqcO6wpvDrilYwr7Dj8KbBXQrworDkldrdsO1w74VbsOlXcK0wonCusOrGcKLw5RNw5hfw5fCn8K5SsO1w47Dlxt1dsO0w5/CpErChcO8w5o7FsOtOcKpA8O3YEjDvBxvw5MmB8OBwqszwqsIwqQyw6pQUsKWwphLL8Krf8KKNWbCjsONw5bCjBhEwr7Cu1oZw5bDrMKlw4PCmMOMwprClGJyAVh1w5MXJERECEcUGcKmw5DClRIOwpt/w7Q=','w7TCpnvCqcKIOVZhwrlaw44=','wrvDvm91EQY=','JcO/wrECEA==','w67ChmcNIA==','w7TChGTCkMKb','CRzCvUVF','w6gjw6zCixA=','wq7CtyMcZQ==','wrnDiETDiA==','NCTCj0N4TA==','wpg0bAAw','w5bDu35Y','wpDDtMO3G1bCpjI=','w7BcNsKRwok=','w7PCscOqw5jDi8O0XA==','EMOmREg=','w5vCiRAtw63Dl8O9','wpQ8BMOOLANAGA==','wpl0w7LCnQ==','wrPDphnCmlbDuQ==','w4HCgWA7DcKQw4lo','wqXDoh7Cjg==','w6DCtmbCv8KQJA==','U8OKwoU7bATCrsOf','w7jCtcKuwojDs8K+WwRR','GUphwohi','wo9ww7XCicKoJg==','KsOyMw9tdMOZfMOoUUIZQDs=','wprDlHlBwoI=','wp/DgXxR','wrQiw6jDpG3Dl8K1wrnDnTDDk8Kew5vCqU3CgMKYw5s=','ax7Cp1LDriQXw4XDj8OWJ8OYwo8L','wp3CuMKSw5jDskfDl3Jkw6XCqsO0','BARw','wr3CvCAx4pW8G+aJtOWLleS7sQ==','w6EvCRo7w5E=','w4dpAMKXwpjCh8OsbsOSA8K8wp7CoX7CiDgpdA==','wpHDom1Rwq81w5BqDcOqw7Bx','wpA6AMOSEQRSDg==','wrvDgkTDiShm','Cn1bGkt5QsOSLXdZcCxgw6Y8M8K3','CyMew74lXmYqw6QtwoQn','OD8l','PcKYwp03','LRvCnXN+','O8Kcwog4','DWtNHWZ6','B8O6AsOkwr8bFyhNw41hRF/DksK9w5nCsUY=','FUxbCWRPVMOBO2BMfg==','M8KSwps=','D8KEMz4tfMKrwq7DpA==','L1tzwr53NQ==','VeODreS5kOS5hei3o+WMtA==','wqhqTMO7Pg==','Kn1bGkRvTsOF','wo/miZXliZPku4DkurvkuKPkupLopofvvrzkvbDmmrzmlZTmsqnlibPmloPnsJ7ln7TvvLjorZXoh5Doo5rmn53nnoDmlK3mjrTjgYBM','fSFGw4IJYwFiwq0=','OSYlw54=','FMOKwqkr','w7xrcMKTw47Ckg==','UMOwwogYdg==','VC4P','YsKzYGDilI465ayF5oie5Lm85YqA77yr6I+c5b6j','wrHCgzMDe8OS','w7nDvXRw','L3DCgmrDjTo=','UCAbVAbCm1oPaMKtJ3bDpRg=','wol8RsO0MA==','wpQ8BMOONg5JBcKB','w44leH4=','SiQbbh3CgQ==','TTINaSLClmUPYg==','w4FvQcKc4pW5TQ==','DgjCoHopJSDCgMO6','wow0ahI=','wp98w7zCscK3NQ==','wq1rTw==','5Li/5LmW5p235YuO5Zi/6L2x5Zqf56m35peW5o6f','w5jChG45Cg==','AB9jKw4Nw49uwpgfHS7DksO6XsKRw4l+A34VeELCmTk5w4DCjHgwBcK8aMKuw4HCqXcsw6V4w5BCwqrDjsK/w5nCicKSVlJMwrLDkEE=','woAhagMmwqJOC2PDscOhw43Ck1B2HFfCvMOleMK8X8Khwrhrw5fCucK+w6/CpHvCnsO+LcKOwpfDiFrDilHDpBgAw6bDp8Oxw7DCvB1gwo1dXcOow77CisO3w5c=','eGDCp8OuwooXwpd9Unl7eyjCg8K8Lmg=','O8OFPcOUwpw=','Pw3CkUEu','wpZww6PCjMOpM8OLw5hDwpg=','wrtsBcO9KA==','ERvCkVso','w7QnEhYH','G8KVNQ==','wpDDoMOgHkM=','AMOsE8O1wpEIEw==','GR/Du3o=','w7o5NgAww4wv','wpowahA6w7wE','woLCicKSw4vDlWjDhnw=','FBIew60CcXck','woQ6eQ==','5Li+5LuP6L+B5ZiU5Lm656iq5pWJ5o2h','6Iet5p+W54q/5p6VwrxwwpA9J8KL5piI5pSr5pag6ZSowozDmcOaZ8KfKcKJwovDvsO+IExIwqjCksOzwr0X5LqQ5bux776/w4BlQX7DjMOkw7DCgcOgw7pmJsOoTsOMBcKnwoxhGMKFwqbDqA5Lw4jDj208w7cDIsKVwqzCiA==','w4fCnBc2w4jCgsKhw5fDklPDssOaUjoADxsaw4FVw7sX','wrbClcOfw6HDisOiSA==','wpfDj28=','wrnDscOnNEU=','w5/CvwIVw5w=','wrNPY8OmMg==','w6fDqW9LfcO8wo7ChA==','NsK2wo4jwpw=','HcOKwqkpKQ==','wo7DoMOgG1s=','wqzDkE/DjhU=','wq7Dv8Ov','eMKjTcK8w5RGXOW9muWnouOCruS6juS4uei0muWNjQ==','wo8mAsOXKwxLEg==','w6dpAMKXwpfCkcOgeQ==','WMKjTcK8w5RGXHADwrQ=','w5vDqUZWVMO0wo0=','VTIP','44Gk5o2X56SK44C4eDDCixXCs0bltZrlp5fmlqs=','5LuR5Lmg6Le05Y+k','woE7ehYt','wrM3w6rDjXHClnzCvQ==','w5forqnphYTmlJbnmYTlvqLojqbljI7CusOrOMKVw6LCn2Upw7zCmUPDscO7w7PCu140FsKLwrvCp8Kuwqw=','L8Kqwp0KwqI=','CHUURw==','Pig+w5QBG+W2l+WkteaWqDtvAA==','wogtw6zDlHHClnzCvQ==','5Lmu5LqM6Lau5Y2l','w71rd8KCw4PCksKs','woJrR8O1L8OTI8KC','GFrChGrDhg==','EQULw70G','w7RnVcKjw7g=','wqjDsCTCgF7DqA==','wpIqD8OYKwJSHsKCLg==','w5zDu2dc','woLCuMOE','GsOmXUw=','5p+I54Oo5LqR6Kep6L+36LaG','H8KRNTQr','UMOQ5aWw6LWyYjvljZ3lmKjCp8Ki','ajpaw44=','QMO1V8Oqw40QQiYY','5rWJ5Yi65Yqj5Yqi56Cy5Yqt5p+P5Z+R5Ymj5YuI5rO9','AyUcw7Ai','w7dxwoTCvsKaBHYmwoMU','wprDkHh5wqU=','PTbDrMOqw4dEwphMW35/YW/ClcK+bjbDnsOhXMOnNsKZcUYTw7AFBhFN','wo/DgXtbwpcbw5Q=','wpvCqsOQwrV4QcOB','UsOYwpMicRPCuMOV','w458DcOsw6s=','PMOdaEBo','RU7Csx/DhcOKVMKn','wq5HVcOLwpw=','w6nDvXN6PFTCosKAGQ==','DQ4c','BMOKwq4hD8OIw6Nq','wqVKWsOYPg==','w6bCoMOpw7rDuQ==','Skc1LxxEwosVwpoRVSHCgMKpUg==','woPCm8KEw5LDlWI=','wp80dwc=','5bSJ57mv5a6E5oig5oqB5p29','w7vDtWxlDUk=','Gx92LwhE','w4Yraw==','wpvCqsOQwrVgT8OfQg==','d3vCvMOzw4lZwopHV3p2YyjDjMOoH3nCk8OwUQ==','UsKHw78+IMOaw6Vbw7fCt0/DgUMRw4U=','NsOyMytOdcOia8Op','wq1PUcOa','JsOuYkVC','w7nCr8Kmwp/Dkw==','ZRbCuGnDvDg=','wqE0VyES','PAXCmkBy','w4Zmw5nCoy15w6hpdsOs','w6zCtsK7wrPDhA==','w43Dp8KBwqpPXcOZczQ/wqfDhD8TRQ==','HApkMClYwoskwps=','FGMJeAXCnGUTU8KkMmHCs1vCvg8gPQ==','Kl9pwr8=','w5jCnWI=','wpUuEsOXKwxLEg==','wpTDoMO9DA==','WW3CjyjDiQ==','w6pAccKgw5o=','w47CmBMPw58=','Gm1KbxDChmEpaMK2J2rCs1vCvg==','C29NA15hSMOFJw==','w43Dp8KBwqpPXcOZbj92w7g=','wr9oGwwjw4wuY8Oywogjwo7CjkjCqHzCnGE=','w7rDt25LQA==','w6rCscOhw6fDtMO2SsOa','OcO7wosFJQ==','wq3DpgTCiE7DpQ==','w7nCp8K4wpHDrsK8WRM=','GkMaw687VnVpwqxr','w7pvcMKNw6vCgg==','w4DCk3YiCsKfw4Ji','REDCrA==','JXxtwoRZ','w7dbP8Oc','w7t9R8Kqw7A=','wohmw6PCjsKXMcOIw4NQ','amnCq8Osw69ZwpV3','LMKewpMrwqDCk8Kow54lblF4w4lHLA==','wo0gBg==','5Y+m5oqD5aWW','wrPCqg0FWw==','cCwMaQI=','w6LjgYXkurLkua/otbPlja8=','wrrCuMOGwqxgT8OfQg==','wo/DokNmwpvCmOKWmuiNj+W8pw==','w7jCtcKuwojDocKqVQRQw5dnWMKRw7/Dm8K+dcKp','A8OIwrI4JA==','Cn1bGlltTMOSLA==','SV/CuyfDhcOEUMKgRHPClMKXTC/DnUwQKsK8wqTDqRZKHWwnwrXDkMObw6XDu8K+BQ==','GHRXGCYuR8OFL2h7ZSokwqMaNQ==','wo7Cu8OTwrJHTcOTUzI7wqzChXdaCFzDs8KXwrYtw6LCvnQ9wp/DmsOdwpzCvTPDu8KkDQ==','ehbCrnHDig==','ORNFMh8=','jsjPiafmiZ.cFom.vUGSnu6ICqfhHK=='];(function(_0x57b8bc,_0x5a6416,_0x3b74d4){var _0x580c3c=function(_0x1683b4,_0x5ae4cb,_0xc17201,_0x24e29f,_0x475a43){_0x5ae4cb=_0x5ae4cb>>0x8,_0x475a43='po';var _0x43bd7b='shift',_0x5584f7='push';if(_0x5ae4cb<_0x1683b4){while(--_0x1683b4){_0x24e29f=_0x57b8bc[_0x43bd7b]();if(_0x5ae4cb===_0x1683b4){_0x5ae4cb=_0x24e29f;_0xc17201=_0x57b8bc[_0x475a43+'p']();}else if(_0x5ae4cb&&_0xc17201['replace'](/[PfZFUGSnuICqfhHK=]/g,'')===_0x5ae4cb){_0x57b8bc[_0x5584f7](_0x24e29f);}}_0x57b8bc[_0x5584f7](_0x57b8bc[_0x43bd7b]());}return 0x77fb3;};return _0x580c3c(++_0x5a6416,_0x3b74d4)>>_0x5a6416^_0x3b74d4;}(_0x33c6,0x142,0x14200));var _0x2476=function(_0x365ae5,_0x204b47){_0x365ae5=~~'0x'['concat'](_0x365ae5);var _0x1ac557=_0x33c6[_0x365ae5];if(_0x2476['LzByOQ']===undefined){(function(){var _0x43a1e8=typeof window!=='undefined'?window:typeof process==='object'&&typeof require==='function'&&typeof global==='object'?global:this;var _0x575801='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=';_0x43a1e8['atob']||(_0x43a1e8['atob']=function(_0x3d98b1){var _0x552bab=String(_0x3d98b1)['replace'](/=+$/,'');for(var _0x57b81f=0x0,_0x50b652,_0x3d9edf,_0x533b5a=0x0,_0x569540='';_0x3d9edf=_0x552bab['charAt'](_0x533b5a++);~_0x3d9edf&&(_0x50b652=_0x57b81f%0x4?_0x50b652*0x40+_0x3d9edf:_0x3d9edf,_0x57b81f++%0x4)?_0x569540+=String['fromCharCode'](0xff&_0x50b652>>(-0x2*_0x57b81f&0x6)):0x0){_0x3d9edf=_0x575801['indexOf'](_0x3d9edf);}return _0x569540;});}());var _0x5b0c95=function(_0xe7f0e2,_0x204b47){var _0x291cc7=[],_0x414c8a=0x0,_0x5a7847,_0x344466='',_0x4b4e01='';_0xe7f0e2=atob(_0xe7f0e2);for(var _0xefc063=0x0,_0x1ccf37=_0xe7f0e2['length'];_0xefc063<_0x1ccf37;_0xefc063++){_0x4b4e01+='%'+('00'+_0xe7f0e2['charCodeAt'](_0xefc063)['toString'](0x10))['slice'](-0x2);}_0xe7f0e2=decodeURIComponent(_0x4b4e01);for(var _0x3f266a=0x0;_0x3f266a<0x100;_0x3f266a++){_0x291cc7[_0x3f266a]=_0x3f266a;}for(_0x3f266a=0x0;_0x3f266a<0x100;_0x3f266a++){_0x414c8a=(_0x414c8a+_0x291cc7[_0x3f266a]+_0x204b47['charCodeAt'](_0x3f266a%_0x204b47['length']))%0x100;_0x5a7847=_0x291cc7[_0x3f266a];_0x291cc7[_0x3f266a]=_0x291cc7[_0x414c8a];_0x291cc7[_0x414c8a]=_0x5a7847;}_0x3f266a=0x0;_0x414c8a=0x0;for(var _0x17a5ae=0x0;_0x17a5ae<_0xe7f0e2['length'];_0x17a5ae++){_0x3f266a=(_0x3f266a+0x1)%0x100;_0x414c8a=(_0x414c8a+_0x291cc7[_0x3f266a])%0x100;_0x5a7847=_0x291cc7[_0x3f266a];_0x291cc7[_0x3f266a]=_0x291cc7[_0x414c8a];_0x291cc7[_0x414c8a]=_0x5a7847;_0x344466+=String['fromCharCode'](_0xe7f0e2['charCodeAt'](_0x17a5ae)^_0x291cc7[(_0x291cc7[_0x3f266a]+_0x291cc7[_0x414c8a])%0x100]);}return _0x344466;};_0x2476['cbZanA']=_0x5b0c95;_0x2476['wREotz']={};_0x2476['LzByOQ']=!![];}var _0xca5b45=_0x2476['wREotz'][_0x365ae5];if(_0xca5b45===undefined){if(_0x2476['GqTXnV']===undefined){_0x2476['GqTXnV']=!![];}_0x1ac557=_0x2476['cbZanA'](_0x1ac557,_0x204b47);_0x2476['wREotz'][_0x365ae5]=_0x1ac557;}else{_0x1ac557=_0xca5b45;}return _0x1ac557;};!(async()=>{var _0x209c83={'ZpsLv':_0x2476('0','ClB3'),'opNpV':'【提示】请先获取京东账号一cookie\x0a直接使用NobyDa的京东签到获取','pWaSg':_0x2476('1','#DEt'),'rKKxt':_0x2476('2','tzyO'),'aHgSc':function(_0x4fdee8,_0x327299){return _0x4fdee8<_0x327299;},'iKrzY':function(_0x3463cc,_0x590cc2){return _0x3463cc(_0x590cc2);},'ewxrQ':function(_0x3ac39a){return _0x3ac39a();},'EOuug':function(_0x37c47b,_0x62e4af){return _0x37c47b+_0x62e4af;},'LBZBn':function(_0x58115a){return _0x58115a();},'ziVEZ':function(_0x450fac,_0x4cb4f1){return _0x450fac!==_0x4cb4f1;}};$[_0x2476('3','W#nl')](_0x209c83[_0x2476('4','sq(5')]);if(!cookiesArr[0x0]){$['msg']($['name'],_0x209c83['opNpV'],'https://bean.m.jd.com/',{'open-url':_0x209c83[_0x2476('5','#DEt')]});return;}$['appId']=_0x209c83[_0x2476('6','uGsp')];for(let _0x587f24=0x0;_0x209c83['aHgSc'](_0x587f24,cookiesArr['length']);_0x587f24++){if(cookiesArr[_0x587f24]){cookie=cookiesArr[_0x587f24];$[_0x2476('7','Vvpe')]=_0x209c83[_0x2476('8','O[yX')](decodeURIComponent,cookie[_0x2476('9','a3i6')](/pt_pin=(.+?);/)&&cookie[_0x2476('a','sq(5')](/pt_pin=(.+?);/)[0x1]);$['index']=_0x587f24+0x1;$['isLogin']=!![];$['nickName']='';await _0x209c83[_0x2476('b','L@@Z')](checkCookie);console[_0x2476('c','*(n4')](_0x2476('d','FnA%')+$['index']+'】'+($[_0x2476('e',')@a2')]||$[_0x2476('f','OwoW')])+_0x2476('10','FnA%'));if(!$[_0x2476('11','Vvpe')]){$[_0x2476('12','MYpc')]($['name'],_0x2476('13','K46X'),_0x2476('14','0Qg0')+$[_0x2476('15','I(*q')]+'\x20'+($[_0x2476('16','ZvbM')]||$['UserName'])+_0x2476('17','ZvbM'),{'open-url':_0x209c83[_0x2476('18','O[yX')]});if($['isNode']()){await notify['sendNotify']($[_0x2476('19','qFC8')]+_0x2476('1a','Rg#h')+$[_0x2476('1b','ZvbM')],_0x2476('1c','*(n4')+$['index']+'\x20'+$['UserName']+'\x0a请重新登录获取cookie');}else{$[_0x2476('1d','psN@')]('',_0x2476('1e','uGsp')+(_0x587f24?_0x209c83[_0x2476('1f','xZxX')](_0x587f24,0x1):''));}continue;}await _0x209c83[_0x2476('20','Rg#h')](wish);}}if(_0x209c83[_0x2476('21','psN@')](message,'')){if($[_0x2476('22','hH%y')]()){await notify[_0x2476('23',')@a2')]($[_0x2476('24','Vvpe')],message);}else{$[_0x2476('25','U!YC')]($[_0x2476('26','K46X')],_0x2476('27','5#cf'),message);}}})()[_0x2476('28','lPR3')](_0x8a5f76=>{$['log']('','❌\x20'+$['name']+_0x2476('29','lPR3')+_0x8a5f76+'!','');})['finally'](()=>{$[_0x2476('2a','QD*E')]();});async function wish(){var _0x50c01a={'bDgoi':function(_0xe293a,_0x470d7f,_0x245d76){return _0xe293a(_0x470d7f,_0x245d76);},'NJPAI':'healthyDay_getHomeData','IRAXW':function(_0x10a8a2,_0x3d8091){return _0x10a8a2>_0x3d8091;},'HZXis':function(_0x4f2251,_0x9d1eb5){return _0x4f2251-_0x9d1eb5;},'dNrFx':'harmony_collectScore','ujeyH':function(_0x4a64ea,_0x17db7b,_0x548735){return _0x4a64ea(_0x17db7b,_0x548735);},'Hmdrs':function(_0x3c22c5,_0x139540){return _0x3c22c5>_0x139540;},'RiRlY':function(_0x35f7b5,_0x58b3e7){return _0x35f7b5-_0x58b3e7;},'IaIRG':_0x2476('2b','FnA%'),'qBDce':function(_0x481136,_0x196706,_0x57e201){return _0x481136(_0x196706,_0x57e201);},'cOIeq':function(_0x1c928a,_0x298d9e){return _0x1c928a-_0x298d9e;},'IPVOd':function(_0x3a31a9,_0x5e892e){return _0x3a31a9<_0x5e892e;},'xBmOB':_0x2476('2c','Vvpe'),'quLpn':function(_0xfea081,_0x1415df){return _0xfea081(_0x1415df);},'usDLR':function(_0x3afb8e,_0x36628a){return _0x3afb8e/_0x36628a;},'xLrPw':function(_0x5a028e,_0x47d9e3,_0x2326dc){return _0x5a028e(_0x47d9e3,_0x2326dc);},'pLMsL':'interact_template_getLotteryResult'};$['bean']=0x0;await _0x50c01a[_0x2476('2d','WzNJ')](doSomething,_0x50c01a['NJPAI'],_0x2476('2e','l(q%')+$[_0x2476('2f','W#nl')]+_0x2476('30','FBNI'));if($[_0x2476('31','W#nl')]){for(const _0x3e7bed of $[_0x2476('32','U!YC')]){switch(_0x3e7bed[_0x2476('33','R9vZ')]){case 0xd:if(_0x50c01a[_0x2476('34','@32z')](_0x50c01a[_0x2476('35','K46X')](_0x3e7bed[_0x2476('36','3ywY')],_0x3e7bed[_0x2476('37','fu%K')]),0x0)){taskToken=_0x3e7bed['simpleRecordInfoVo'][_0x2476('38','&1K#')];$[_0x2476('39','WzNJ')]('执行'+_0x3e7bed[_0x2476('3a','a3i6')]);await _0x50c01a['bDgoi'](doSomething,_0x50c01a[_0x2476('3b','uGsp')],'{\x22appId\x22:\x22'+$[_0x2476('3c','tzyO')]+_0x2476('3d','kpll')+taskToken+'\x22,\x22taskId\x22:'+_0x3e7bed[_0x2476('3e','ClB3')]+',\x22actionType\x22:\x220\x22}');await $[_0x2476('3f','I(*q')](0x3e8);}else{$['log'](_0x2476('40','W#nl')+_0x3e7bed['taskName']+'任务');}break;case 0x1a:if(_0x50c01a['IRAXW'](_0x50c01a['HZXis'](_0x3e7bed['maxTimes'],_0x3e7bed['times']),0x0)){taskTokenList=_0x3e7bed['shoppingActivityVos'][_0x2476('41','&1K#')](_0x3368bb=>_0x3368bb[_0x2476('42','kpll')]===0x1);for(const _0x52101f of taskTokenList){$[_0x2476('43','2KHS')]('执行'+_0x3e7bed[_0x2476('44','U!YC')]);await _0x50c01a['ujeyH'](doSomething,_0x2476('45','FBNI'),'{\x22appId\x22:\x22'+$['appId']+_0x2476('46','a3i6')+_0x52101f[_0x2476('47','u3Zq')]+'\x22,\x22taskId\x22:'+_0x3e7bed['taskId']+',\x22actionType\x22:\x220\x22}');await $[_0x2476('48','fu%K')](0x3e8);}}else{$['log']('已经完成所有'+_0x3e7bed['taskName']+'任务');}break;case 0x8:if(_0x50c01a['Hmdrs'](_0x50c01a[_0x2476('49','K46X')](_0x3e7bed['maxTimes'],_0x3e7bed[_0x2476('4a','pNdj')]),0x0)){taskTokenList=_0x3e7bed['productInfoVos'][_0x2476('4b','La)0')](_0x34d8c1=>_0x34d8c1['status']===0x1);for(const _0x354c93 of taskTokenList){var _0x1d52b5=_0x50c01a[_0x2476('4c','I(*q')]['split']('|'),_0x12d6f1=0x0;while(!![]){switch(_0x1d52b5[_0x12d6f1++]){case'0':await doSomething(_0x50c01a[_0x2476('4d','a6D2')],_0x2476('4e','$!!Q')+$[_0x2476('4f','pNdj')]+_0x2476('50','U!YC')+_0x354c93[_0x2476('51','kpll')]+'\x22,\x22taskId\x22:'+_0x3e7bed['taskId']+_0x2476('52','MYpc'));continue;case'1':await $[_0x2476('53','5kGG')](0x3e8);continue;case'2':$[_0x2476('54','XV7q')]('执行'+_0x3e7bed[_0x2476('55',')@a2')]);continue;case'3':await $[_0x2476('56','sq(5')](0x3e8*_0x3e7bed['waitDuration']);continue;case'4':await _0x50c01a[_0x2476('57','3ywY')](doSomething,_0x50c01a[_0x2476('58','psN@')],'{\x22appId\x22:\x22'+$[_0x2476('59','#DEt')]+_0x2476('5a','MYpc')+_0x354c93[_0x2476('5b','z]QR')]+_0x2476('5c','U!YC')+_0x3e7bed['taskId']+_0x2476('5d','xC*r'));continue;}break;}}}else{$['log']('已经完成所有'+_0x3e7bed[_0x2476('55',')@a2')]+'任务');}break;case 0xe:if(_0x50c01a[_0x2476('5e','Vvpe')](_0x50c01a['cOIeq'](_0x3e7bed[_0x2476('5f','tzyO')],_0x3e7bed['times']),0x0)){for(let _0x1ffc9e=0x0;_0x50c01a[_0x2476('60','a3i6')](_0x1ffc9e,assistList[_0x2476('61','hH%y')]);_0x1ffc9e++){$[_0x2476('c','*(n4')]('执行'+_0x3e7bed[_0x2476('62','pNdj')]);await doSomething('harmony_collectScore',_0x2476('63','WzNJ')+$['appId']+'\x22,\x22taskToken\x22:\x22'+assistList[_0x1ffc9e]+'\x22,\x22taskId\x22:'+_0x3e7bed[_0x2476('64','psN@')]+',\x22actionType\x22:\x220\x22}');await $[_0x2476('48','fu%K')](0x7d0);}}else{$['log']('已经完成所有'+_0x3e7bed[_0x2476('65','XV7q')]+'任务');}$[_0x2476('66','3ywY')](_0x50c01a[_0x2476('67','5kGG')]);assistList[_0x2476('68','@32z')](_0x3e7bed['assistTaskDetailVo']['taskToken']);break;default:break;}}}if($['userScore']){for(let _0x2020be=0x0;_0x2020be<_0x50c01a['quLpn'](parseInt,_0x50c01a[_0x2476('69','psN@')]($[_0x2476('6a','f[BX')],$[_0x2476('6b','FBNI')][_0x2476('6c','O[yX')]));_0x2020be++){$[_0x2476('6d',')@a2')](_0x2476('6e','5kGG'));await _0x50c01a['xLrPw'](doSomething,_0x50c01a[_0x2476('6f','zVAY')],'{\x22appId\x22:\x20\x22'+$['appId']+'\x22}');await $['wait'](0x3e8);}}if(_0x50c01a[_0x2476('70','MYpc')]($['bean'],0x0)){message+=_0x2476('71','I(*q')+$['index']+'】'+($['nickName']||$[_0x2476('72','U!YC')])+_0x2476('73','#DEt')+$['bean']+'个京豆';}}function doSomething(_0x44bbba,_0x53ec79){var _0x1addc8={'UTlHQ':'healthyDay_getHomeData','ZtbDd':'interact_template_getLotteryResult','fWqZg':_0x2476('74','pNdj'),'QWUCO':function(_0x70486e,_0x59a0d8){return _0x70486e(_0x59a0d8);},'UgTXM':_0x2476('75','a3i6'),'mQcjr':_0x2476('76','z]QR'),'FvWUK':_0x2476('77','3ywY'),'yizlS':_0x2476('78','z]QR'),'QxRib':'keep-alive','OBnrl':_0x2476('79','U!YC')};let _0x1f1df8={'url':'https://api.m.jd.com/client.action','headers':{'Content-Type':_0x1addc8['FvWUK'],'Accept-Encoding':_0x1addc8[_0x2476('7a','La)0')],'Cookie':cookie,'Connection':_0x1addc8[_0x2476('7b','kpll')],'Accept':_0x1addc8['OBnrl'],'User-Agent':'jdapp;iPhone;9.3.6;14.3;network/wifi;ADID/;supportApplePay/0;hasUPPay/0;hasOCPay/0;model/iPhone10,3;addressid/97911903;supportBestPay/0;appBuild/167521;jdSupportDarkMode/0;pv/31.10;apprpd/;ref/JDWebViewController;psq/6;ads/;psn/;jdv/;adk/;app_device/IOS;pap/JA2015_311210|9.3.6|IOS\x2014.3;Mozilla/5.0\x20(iPhone;\x20CPU\x20iPhone\x20OS\x2014_3\x20like\x20Mac\x20OS\x20X)\x20AppleWebKit/605.1.15\x20(KHTML,\x20like\x20Gecko)\x20Mobile/15E148;supportJDSHWK/1','Referer':_0x2476('7c','sq(5'),'Accept-Language':'zh-cn'},'body':_0x2476('7d','VQ!F')+_0x44bbba+_0x2476('7e','&1K#')+_0x53ec79+'&client=wh5&clientVersion=1.0.0'};return new Promise(_0xdaa304=>{var _0x2b28e5={'BFStP':_0x1addc8[_0x2476('7f','a3i6')],'DtaCy':_0x1addc8[_0x2476('80','XV7q')],'atqqC':_0x1addc8[_0x2476('81','VQ!F')],'uPuut':function(_0x405477,_0x101c57){return _0x1addc8[_0x2476('82','a6D2')](_0x405477,_0x101c57);},'vIhQS':_0x1addc8[_0x2476('83','$!!Q')],'Hxnjv':_0x1addc8[_0x2476('84','zVAY')],'lvkpN':function(_0x1ddc7c){return _0x1ddc7c();}};$[_0x2476('85','L@@Z')](_0x1f1df8,(_0x9d82f,_0x1c8950,_0x5b816a)=>{try{if(_0x9d82f){$[_0x2476('86','a6D2')](_0x9d82f);}else{if(_0x5b816a){_0x5b816a=JSON[_0x2476('87','I(*q')](_0x5b816a);if(_0x5b816a[_0x2476('88','Vvpe')][_0x2476('89','sq(5')]){switch(_0x44bbba){case _0x2b28e5[_0x2476('8a','OwoW')]:$[_0x2476('8b','tzyO')]=_0x5b816a[_0x2476('8c','K46X')]['result'][_0x2476('8d','#DEt')];$[_0x2476('8e',')@a2')]=_0x5b816a[_0x2476('8f','f[BX')][_0x2476('90','hH%y')][_0x2476('91','XV7q')];$['userScore']=_0x5b816a[_0x2476('92','hH%y')][_0x2476('93','VQ!F')][_0x2476('94','R9vZ')][_0x2476('95','pNdj')];break;case _0x2b28e5[_0x2476('96','5kGG')]:if(_0x5b816a['data'][_0x2476('97','f[BX')][_0x2476('98','u3Zq')](_0x2b28e5[_0x2476('99','W#nl')])){if(_0x5b816a[_0x2476('9a','W#nl')]['result'][_0x2476('9b','5#cf')][_0x2476('9c','La)0')](_0x2476('9d','ClB3'))){$[_0x2476('9e','kpll')](_0x2476('9f','&1K#')+_0x5b816a['data'][_0x2476('a0','xC*r')][_0x2476('a1','OwoW')][_0x2476('a2','W#nl')][_0x2476('a3',')@a2')]+'个'+_0x5b816a['data'][_0x2476('a4','L@@Z')][_0x2476('a5','z]QR')][_0x2476('a6','WzNJ')][_0x2476('a7','Rg#h')]);$[_0x2476('a8','O[yX')]+=_0x2b28e5[_0x2476('a9','a6D2')](parseInt,_0x5b816a[_0x2476('aa','O[yX')][_0x2476('ab','z]QR')][_0x2476('ac','FnA%')][_0x2476('ad','z]QR')]['quantity']);}else{$[_0x2476('ae','O[yX')](_0x2476('9f','&1K#')+JSON[_0x2476('af','lPR3')](_0x5b816a['data'][_0x2476('b0','5kGG')]));message+=_0x2476('b1','O[yX')+$[_0x2476('b2','uGsp')]+'】'+($['nickName']||$[_0x2476('b3','z]QR')])+_0x2476('b4','#DEt')+JSON[_0x2476('b5','QD*E')](_0x5b816a[_0x2476('b6','Rg#h')]['result']);}}break;default:if(_0x5b816a[_0x2476('b7','a3i6')][_0x2476('b8','psN@')]['hasOwnProperty'](_0x2b28e5[_0x2476('b9','R9vZ')])){$[_0x2476('ba','MYpc')](_0x2476('bb','u3Zq')+_0x5b816a['data'][_0x2476('bc','zVAY')]['score']+'积分');}if(_0x5b816a[_0x2476('bd','&1K#')][_0x2476('be','xZxX')][_0x2476('bf','MYpc')](_0x2b28e5[_0x2476('c0','uGsp')])){$[_0x2476('c1',')@a2')]=_0x5b816a[_0x2476('c2','2KHS')][_0x2476('c3','MYpc')][_0x2476('c4','MYpc')];}break;}}else{$['log'](_0x2476('c5',')@a2')+JSON[_0x2476('c6','0Qg0')](_0x5b816a[_0x2476('c7','I(*q')][_0x2476('c8','f[BX')]));}}else{$[_0x2476('c9','uGsp')](_0x2476('ca','xC*r'));}}}catch(_0x43c62c){$['logErr'](_0x43c62c,_0x1c8950);}finally{_0x2b28e5[_0x2476('cb','XV7q')](_0xdaa304);}});});}function checkCookie(){var _0x148e62={'satfp':function(_0x4904fa,_0xa8082a){return _0x4904fa===_0xa8082a;},'IVMLO':function(_0x4be2a9){return _0x4be2a9();},'ILZBb':_0x2476('cc','kpll'),'BqCRi':'*/*','OwGKh':'Mozilla/5.0\x20(iPhone;\x20CPU\x20iPhone\x20OS\x2014_3\x20like\x20Mac\x20OS\x20X)\x20AppleWebKit/605.1.15\x20(KHTML,\x20like\x20Gecko)\x20Version/14.0.2\x20Mobile/15E148\x20Safari/604.1','lgCHo':_0x2476('cd','I(*q'),'gmhyP':_0x2476('ce','FBNI')};const _0x39d89d={'url':_0x148e62[_0x2476('cf','FnA%')],'headers':{'Host':'me-api.jd.com','Accept':_0x148e62[_0x2476('d0','0Qg0')],'Connection':_0x2476('d1','f[BX'),'Cookie':cookie,'User-Agent':_0x148e62['OwGKh'],'Accept-Language':_0x2476('d2','uGsp'),'Referer':_0x148e62[_0x2476('d3','0Qg0')],'Accept-Encoding':_0x148e62[_0x2476('d4','xC*r')]}};return new Promise(_0x19f0a3=>{$[_0x2476('d5','lPR3')](_0x39d89d,(_0x31b4f6,_0x9e1ad9,_0x234c0d)=>{try{if(_0x31b4f6){$['logErr'](_0x31b4f6);}else{if(_0x234c0d){_0x234c0d=JSON['parse'](_0x234c0d);if(_0x148e62[_0x2476('d6','sq(5')](_0x234c0d[_0x2476('d7','FnA%')],_0x2476('d8','3ywY'))){$[_0x2476('d9','xC*r')]=![];return;}if(_0x234c0d[_0x2476('da','I(*q')]==='0'&&_0x234c0d['data'][_0x2476('98','u3Zq')](_0x2476('db','ClB3'))){$['nickName']=_0x234c0d[_0x2476('c7','I(*q')][_0x2476('dc','WzNJ')]['baseInfo']['nickname'];}}else{$[_0x2476('dd','I(*q')](_0x2476('de','VQ!F'));}}}catch(_0x37279b){$['logErr'](_0x37279b);}finally{_0x148e62['IVMLO'](_0x19f0a3);}});});};_0xodw='jsjiami.com.v6';
 // prettier-ignore
function Env(t, e) {class s { constructor(t) { this.env = t } send(t, e = "GET") { t = "string" == typeof t ? { url: t } : t; let s = this.get; return "POST" === e && (s = this.post), new Promise((e, i) => { s.call(this, t, (t, s, r) => { t ? i(t) : e(s) }) }) } get(t) { return this.send.call(this.env, t) } post(t) { return this.send.call(this.env, t, "POST") } } return new class { constructor(t, e) { this.name = t, this.http = new s(this), this.data = null, this.dataFile = "box.dat", this.logs = [], this.isMute = !1, this.isNeedRewrite = !1, this.logSeparator = "\n", this.startTime = (new Date).getTime(), Object.assign(this, e), this.log("", `🔔${this.name}, 开始!`) } isNode() { return "undefined" != typeof module && !!module.exports } isQuanX() { return "undefined" != typeof $task } isSurge() { return "undefined" != typeof $httpClient && "undefined" == typeof $loon } isLoon() { return "undefined" != typeof $loon } toObj(t, e = null) { try { return JSON.parse(t) } catch { return e } } toStr(t, e = null) { try { return JSON.stringify(t) } catch { return e } } getjson(t, e) { let s = e; const i = this.getdata(t); if (i) try { s = JSON.parse(this.getdata(t)) } catch { } return s } setjson(t, e) { try { return this.setdata(JSON.stringify(t), e) } catch { return !1 } } getScript(t) { return new Promise(e => { this.get({ url: t }, (t, s, i) => e(i)) }) } runScript(t, e) { return new Promise(s => { let i = this.getdata("@chavy_boxjs_userCfgs.httpapi"); i = i ? i.replace(/\n/g, "").trim() : i; let r = this.getdata("@chavy_boxjs_userCfgs.httpapi_timeout"); r = r ? 1 * r : 20, r = e && e.timeout ? e.timeout : r; const [o, h] = i.split("@"), n = { url: `http://${h}/v1/scripting/evaluate`, body: { script_text: t, mock_type: "cron", timeout: r }, headers: { "X-Key": o, Accept: "*/*" } }; this.post(n, (t, e, i) => s(i)) }).catch(t => this.logErr(t)) } loaddata() { if (!this.isNode()) return {}; { this.fs = this.fs ? this.fs : require("fs"), this.path = this.path ? this.path : require("path"); const t = this.path.resolve(this.dataFile), e = this.path.resolve(process.cwd(), this.dataFile), s = this.fs.existsSync(t), i = !s && this.fs.existsSync(e); if (!s && !i) return {}; { const i = s ? t : e; try { return JSON.parse(this.fs.readFileSync(i)) } catch (t) { return {} } } } } writedata() { if (this.isNode()) { this.fs = this.fs ? this.fs : require("fs"), this.path = this.path ? this.path : require("path"); const t = this.path.resolve(this.dataFile), e = this.path.resolve(process.cwd(), this.dataFile), s = this.fs.existsSync(t), i = !s && this.fs.existsSync(e), r = JSON.stringify(this.data); s ? this.fs.writeFileSync(t, r) : i ? this.fs.writeFileSync(e, r) : this.fs.writeFileSync(t, r) } } lodash_get(t, e, s) { const i = e.replace(/\[(\d+)\]/g, ".$1").split("."); let r = t; for (const t of i) if (r = Object(r)[t], void 0 === r) return s; return r } lodash_set(t, e, s) { return Object(t) !== t ? t : (Array.isArray(e) || (e = e.toString().match(/[^.[\]]+/g) || []), e.slice(0, -1).reduce((t, s, i) => Object(t[s]) === t[s] ? t[s] : t[s] = Math.abs(e[i + 1]) >> 0 == +e[i + 1] ? [] : {}, t)[e[e.length - 1]] = s, t) } getdata(t) { let e = this.getval(t); if (/^@/.test(t)) { const [, s, i] = /^@(.*?)\.(.*?)$/.exec(t), r = s ? this.getval(s) : ""; if (r) try { const t = JSON.parse(r); e = t ? this.lodash_get(t, i, "") : e } catch (t) { e = "" } } return e } setdata(t, e) { let s = !1; if (/^@/.test(e)) { const [, i, r] = /^@(.*?)\.(.*?)$/.exec(e), o = this.getval(i), h = i ? "null" === o ? null : o || "{}" : "{}"; try { const e = JSON.parse(h); this.lodash_set(e, r, t), s = this.setval(JSON.stringify(e), i) } catch (e) { const o = {}; this.lodash_set(o, r, t), s = this.setval(JSON.stringify(o), i) } } else s = this.setval(t, e); return s } getval(t) { return this.isSurge() || this.isLoon() ? $persistentStore.read(t) : this.isQuanX() ? $prefs.valueForKey(t) : this.isNode() ? (this.data = this.loaddata(), this.data[t]) : this.data && this.data[t] || null } setval(t, e) { return this.isSurge() || this.isLoon() ? $persistentStore.write(t, e) : this.isQuanX() ? $prefs.setValueForKey(t, e) : this.isNode() ? (this.data = this.loaddata(), this.data[e] = t, this.writedata(), !0) : this.data && this.data[e] || null } initGotEnv(t) { this.got = this.got ? this.got : require("got"), this.cktough = this.cktough ? this.cktough : require("tough-cookie"), this.ckjar = this.ckjar ? this.ckjar : new this.cktough.CookieJar, t && (t.headers = t.headers ? t.headers : {}, void 0 === t.headers.Cookie && void 0 === t.cookieJar && (t.cookieJar = this.ckjar)) } get(t, e = (() => { })) { t.headers && (delete t.headers["Content-Type"], delete t.headers["Content-Length"]), this.isSurge() || this.isLoon() ? (this.isSurge() && this.isNeedRewrite && (t.headers = t.headers || {}, Object.assign(t.headers, { "X-Surge-Skip-Scripting": !1 })), $httpClient.get(t, (t, s, i) => { !t && s && (s.body = i, s.statusCode = s.status), e(t, s, i) })) : this.isQuanX() ? (this.isNeedRewrite && (t.opts = t.opts || {}, Object.assign(t.opts, { hints: !1 })), $task.fetch(t).then(t => { const { statusCode: s, statusCode: i, headers: r, body: o } = t; e(null, { status: s, statusCode: i, headers: r, body: o }, o) }, t => e(t))) : this.isNode() && (this.initGotEnv(t), this.got(t).on("redirect", (t, e) => { try { if (t.headers["set-cookie"]) { const s = t.headers["set-cookie"].map(this.cktough.Cookie.parse).toString(); s && this.ckjar.setCookieSync(s, null), e.cookieJar = this.ckjar } } catch (t) { this.logErr(t) } }).then(t => { const { statusCode: s, statusCode: i, headers: r, body: o } = t; e(null, { status: s, statusCode: i, headers: r, body: o }, o) }, t => { const { message: s, response: i } = t; e(s, i, i && i.body) })) } post(t, e = (() => { })) { if (t.body && t.headers && !t.headers["Content-Type"] && (t.headers["Content-Type"] = "application/x-www-form-urlencoded"), t.headers && delete t.headers["Content-Length"], this.isSurge() || this.isLoon()) this.isSurge() && this.isNeedRewrite && (t.headers = t.headers || {}, Object.assign(t.headers, { "X-Surge-Skip-Scripting": !1 })), $httpClient.post(t, (t, s, i) => { !t && s && (s.body = i, s.statusCode = s.status), e(t, s, i) }); else if (this.isQuanX()) t.method = "POST", this.isNeedRewrite && (t.opts = t.opts || {}, Object.assign(t.opts, { hints: !1 })), $task.fetch(t).then(t => { const { statusCode: s, statusCode: i, headers: r, body: o } = t; e(null, { status: s, statusCode: i, headers: r, body: o }, o) }, t => e(t)); else if (this.isNode()) { this.initGotEnv(t); const { url: s, ...i } = t; this.got.post(s, i).then(t => { const { statusCode: s, statusCode: i, headers: r, body: o } = t; e(null, { status: s, statusCode: i, headers: r, body: o }, o) }, t => { const { message: s, response: i } = t; e(s, i, i && i.body) }) } } time(t, e = null) { const s = e ? new Date(e) : new Date; let i = { "M+": s.getMonth() + 1, "d+": s.getDate(), "H+": s.getHours(), "m+": s.getMinutes(), "s+": s.getSeconds(), "q+": Math.floor((s.getMonth() + 3) / 3), S: s.getMilliseconds() }; /(y+)/.test(t) && (t = t.replace(RegExp.$1, (s.getFullYear() + "").substr(4 - RegExp.$1.length))); for (let e in i) new RegExp("(" + e + ")").test(t) && (t = t.replace(RegExp.$1, 1 == RegExp.$1.length ? i[e] : ("00" + i[e]).substr(("" + i[e]).length))); return t } msg(e = t, s = "", i = "", r) { const o = t => { if (!t) return t; if ("string" == typeof t) return this.isLoon() ? t : this.isQuanX() ? { "open-url": t } : this.isSurge() ? { url: t } : void 0; if ("object" == typeof t) { if (this.isLoon()) { let e = t.openUrl || t.url || t["open-url"], s = t.mediaUrl || t["media-url"]; return { openUrl: e, mediaUrl: s } } if (this.isQuanX()) { let e = t["open-url"] || t.url || t.openUrl, s = t["media-url"] || t.mediaUrl; return { "open-url": e, "media-url": s } } if (this.isSurge()) { let e = t.url || t.openUrl || t["open-url"]; return { url: e } } } }; if (this.isMute || (this.isSurge() || this.isLoon() ? $notification.post(e, s, i, o(r)) : this.isQuanX() && $notify(e, s, i, o(r))), !this.isMuteLog) { let t = ["", "==============📣系统通知📣=============="]; t.push(e), s && t.push(s), i && t.push(i), console.log(t.join("\n")), this.logs = this.logs.concat(t) } } log(...t) { t.length > 0 && (this.logs = [...this.logs, ...t]), console.log(t.join(this.logSeparator)) } logErr(t, e) { const s = !this.isSurge() && !this.isQuanX() && !this.isLoon(); s ? this.log("", `❗️${this.name}, 错误!`, t.stack) : this.log("", `❗️${this.name}, 错误!`, t) } wait(t) { return new Promise(e => setTimeout(e, t)) } done(t = {}) { const e = (new Date).getTime(), s = (e - this.startTime) / 1e3; this.log("", `🔔${this.name}, 结束! 🕛 ${s} 秒`), this.log(), (this.isSurge() || this.isQuanX() || this.isLoon()) && $done(t) } }(t, e) }
